# 示教拖拽功能说明

## 🎯 新增功能

为越疆机器人TCP-IP-Python-V4项目新增了**示教拖拽模式与关节角度记录**功能，允许用户：

1. **手动拖拽机器人** - 开启拖拽模式后可直接用手拖拽机器人
2. **实时记录数据** - 自动记录关节角度和末端位置
3. **数据自动保存** - 保存为JSON格式，便于后续分析使用

## 📁 新增文件

| 文件名 | 说明 | 推荐程度 |
|--------|------|---------|
| `simple_drag_demo.py` | **完整的示教拖拽示例程序** | ⭐⭐⭐⭐⭐ |
| `DRAG_FEATURE_README.md` | 功能使用说明文档 | ⭐⭐⭐⭐⭐ |

## 🚀 快速开始

### 1. 修改IP地址
编辑 `simple_drag_demo.py` 文件，修改第18行：
```python
ROBOT_IP = "192.168.5.1"  # 改为你的机器人IP
```

### 2. 运行程序
```bash
python simple_drag_demo.py
```

### 3. 按提示操作
1. 程序自动连接机器人
2. 自动开启拖拽模式  
3. 手动拖拽机器人到不同位置
4. 按 `Ctrl+C` 停止记录
5. 数据自动保存为JSON文件

## 📊 数据格式

记录的数据包含：
- **关节角度**: J1-J6的实时角度值（度）
- **末端位置**: X,Y,Z位置和Rx,Ry,Rz姿态
- **时间戳**: 精确的时间记录
- **索引**: 方便数据排序和检索

示例输出：
```
记录点  1: 关节[-45.1°, 30.5°,-60.8°,  0.0°, 90.0°, 45.0°] 位置[ 300.5, 200.2, 150.8]
记录点  2: 关节[-44.8°, 31.2°,-61.1°,  0.5°, 89.8°, 45.2°] 位置[ 302.1, 201.5, 151.2]
```

## ⚙️ 核心API

### 拖拽模式控制
```python
from dobot_api import DobotApiDashboard

dashboard = DobotApiDashboard("192.168.5.1", 29999)

# 开启拖拽模式
dashboard.StartDrag()

# 停止拖拽模式  
dashboard.StopDrag()
```

### 数据获取
```python
from dobot_api import DobotApiFeedBack

feedback = DobotApiFeedBack("192.168.5.1", 30004)

# 获取反馈数据
feed_data = feedback.feedBackData()

# 提取关节角度
joint_angles = feed_data['QActual'][0]

# 提取末端位置
tool_position = feed_data['ToolVectorActual'][0]
```

## 🛡️ 安全提醒

⚠️ **使用前请确保：**
1. 机器人周围无人员和障碍物
2. 准备好紧急停止按钮
3. 拖拽动作缓慢平稳
4. 不要超出机器人工作范围

## 🔧 使用条件

### 网络配置
- 电脑IP: `192.168.X.X` 网段
- 机器人模式: TCP/IP模式
- 端口: 29999 (控制) + 30004 (反馈)

### 软件要求
- Python 3.6+
- numpy
- 现有的dobot_api.py模块

## 💡 应用场景

1. **轨迹示教** - 手动引导机器人学习复杂路径
2. **位置标定** - 快速记录工作空间关键点位
3. **动作复现** - 记录专家操作并自动化重现
4. **安全边界** - 定义机器人安全操作区域

## 🎮 操作流程

```
1. 连接机器人 → 2. 使能机器人 → 3. 开启拖拽 → 4. 手动拖拽 → 5. 记录数据 → 6. 保存文件
```

## 📋 输出文件

程序会生成如下格式的文件名：
```
teach_drag_record_20241004_153025.json
```

包含完整的元数据和位置记录，可用于：
- 数据分析
- 轨迹回放
- 路径规划
- 动作学习

## 🔍 故障排除

### 常见错误和解决方案

1. **连接失败** → 检查IP地址和网络
2. **使能失败** → 检查机器人状态和报警
3. **拖拽失败** → 确保机器人已使能且无报警
4. **数据获取失败** → 检查反馈连接

## 📚 详细文档

更多详细信息请参考：
- 项目原有的 `README.md` - 基础API说明

---

## 🔄 版本信息

- **版本**: v1.0.0
- **日期**: 2024年10月4日  
- **基于**: TCP-IP-Python-V4项目
- **新增功能**: 示教拖拽模式与关节角度记录

## 👥 使用反馈

如有问题或建议，请检查：
1. 网络连接状态
2. 机器人工作模式
3. 程序输出日志
4. 使用指南文档

---

**🎯 立即体验**: `python simple_drag_demo.py`